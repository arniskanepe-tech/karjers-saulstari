<!DOCTYPE html>
<html lang="lv">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Karjers Saulstari</title>
  <meta name="description" content="Karjers “Saulstari” — smilts, melnzeme, šķembas. Piegāde. Salaspils novads.">
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
<header class="header">
  <div class="container nav">
    <div class="brand">
      <img src="assets/logo.svg" alt="Karjers Saulstari" width="32" height="32">
      <strong>Karjers Saulstari</strong>
    </div>
    <nav>
      <a href="index.html" class="active">Sākums</a>
      <a href="materials.html" class="">Materiāli</a>
      <a href="contact.html" class="">Kontakti</a>
    </nav>
  </div>
</header>

<section class="hero">
  <div class="container">
    <div class="panel">
      <div>
        <h1>Smilts, melnzeme un šķembas no Salaspils novada</h1>
        <p>Mūsu karjers “Saulstari” nodrošina materiālu piegādi, godīgas cenas un ātru saziņu. Visi materiāli ar pieejamību un cenām zemāk.</p>
        <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn ghost" href="contact.html">Kontakti</a>
        </div>
        <div style="margin-top:18px" class="badge-note">Lieliem apjomiem — individuālas cenas. <a href="contact.html">Aizpildi ātro pieprasījumu</a>.</div>
      </div>
      <div class="map-wrap">
        <iframe src="https://www.google.com/maps?q=Karjers%20Saulstari%20Salaspils&output=embed" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2>Materiāli</h2>
    <div id="homeList" class="vlist"></div>
  </div>
</section>

<script>
async function loadHomeMaterials(){
  const res = await fetch('data/materials.json');
  const items = await res.json();
  const el = document.getElementById('homeMaterials');
  el.innerHTML = items.map(rowHTML).join('');
}
function chip(status){
  const map={"available":"Pieejams","low":"Neliels daudzums","oos":"Šobrīd nav pieejams","by_order":"Pēc pasūtījuma"};
  const cls={"available":"available","low":"low","oos":"oos","by_order":"by_order"};
  return `<span class="chip ${cls[status]}">${map[status]}</span>`;
}
function availLine(status, name){
  const txt={"available":"Pieejams","low":"Neliels daudzums","oos":"Šobrīd nav pieejams","by_order":"Pēc pasūtījuma"}[status];
  const dotClass={"available":"green","low":"yellow","oos":"red","by_order":"yellow"}[status];
  const extra = status==="oos" ? ` — <a href="contact.html?material=${encodeURIComponent(name)}">interesēties</a>` : "";
  return `<div class="avail-line"><span class="dot ${dotClass}"></span><strong>Pieejamība:</strong> ${txt}${extra}</div>`;
}
function rowHTML(m){
  const price = m.price ? `${m.price.toFixed(2)} €${m.unit?`/${m.unit}`:""}` : `Cena pēc pieprasījuma`;
  const frac = m.fraction ? `<div class="meta">${m.fraction}</div>`:"";
  return `<div class="vitem">
      <div class="vleft">
        <div>
          <div class="vname">${m.name}${m.fraction?` ${m.fraction}`:''}</div>
          <div class="vmeta">Atjaunots: ${new Date(m.updated_at).toLocaleString('lv-LV')}</div>
        </div>
      </div>
      <div class="vright">
        <div class="vprice">${price}</div>
        ${availLine(m.status, m.name)}
        <a class="btn" href="contact.html?material=${encodeURIComponent(m.name)}">Uzdot jautājumu</a>
      </div>
    </div>`;
}
loadHomeMaterials();
</script>

<footer class="footer">
  <div class="container">
    <div class="row">
      <div>© 2025 Karjers “Saulstari”. Visas tiesības aizsargātas.</div>
      <div>Darba dienās 7:00–18:00 · Tel. <a href="tel:+37120044910">+371 20044910</a></div>
    </div>
  </div>
</footer>
</body>
</html>
